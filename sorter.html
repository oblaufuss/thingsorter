<!DOCTYPE html>
<head>
	<style type="text/CSS">
		body{
			background-color: grey;
		}
		#fldLeft    {
			height: 180px;
			text-align: center;
			min-width: 120px;
			border: 1px solid #000;
			cursor:pointer;
			padding:10px;

		}
		#fldRight   {
			height: 180px;
			text-align: center;
			padding:10px;
			min-width: 120px;
			border: 1px solid #000;
			cursor:pointer;

		}
	</style>
</head>
<script type="text/javascript">
	var data = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
	var dataScores = new Object();
	
	var sort = [data];
	var rounds = 0; // number of times we've iterated through all the data
	
	// iterates through data
	var tier = 0; // x value
	var index = 0; // y value

	// for specific matchups
	var matches = 0; // number of matchups
	var left;
	var right;
	
	// initialize all scores to zero
	function startup(){
		for (i in data){
			dataScores[data[i]] = 0;
		}
		setupMatch();
	}

	function setupMatch(){
		left = sort[tier][index];
		right = sort[tier][index + 1];
		while (right == null) {
			nextRow();
			left = sort[tier][index];
			right = sort[tier][index + 1];
		}
		document.getElementById('fldLeft').innerHTML = left;
		document.getElementById('fldRight').innerHTML = right;
		checkDone();
	}

	function checkDone(){
		if (rounds >= data.length){
			document.getElementById('fldLeft').innerHTML = "you";
			document.getElementById('fldRight').innerHTML = "done";
			document.getElementById('fldLeft').onclick = null;
			document.getElementById('fldRight').onclick = null;
		}
	}

	function fnc_Sort(selected){
		matches ++;
		var scored = "a";
		if (selected == 1){//left
			scored = sort[tier][index];
		} else {//right
			scored = sort[tier][index+1];
		}
		
		dataScores[scored] ++; 
		index = index + 2; //move to next pair
		
		if (atEndOfLine()){
			nextRow();
		}
		setupMatch();
		console.log(scored + ", " + dataScores[scored]);
	}

	
	function atEndOfLine(){
		return sort[tier].length <= index + 2;
	}

	function nextRow(){
		index = 0;
		tier ++;
		if (tier > rounds){
			resetRows();
		}
	}
	
	function resetRows(){
		rounds ++;
		index = 0;
		tier = 0; 
		sort = [];
		for(var i = 0; i < rounds+1; i++){
			sort.push(new Array());
		}
		for (i in data){
			var newTier = dataScores[data[i]];
			sort[newTier].push(data[i])
		}
		console.log(sort);
		console.log(matches + " matches");
	}
	
</script>
<body onLoad="startup()">

	<table>
		<tr>
			<td id="fldLeft" onClick="fnc_Sort(1);"> Left</td>
			<td id="fldRight" onClick="fnc_Sort(-1);"> Right</td>
		</tr>
	</table>

</body>
